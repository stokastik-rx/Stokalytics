<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Stokalytics{% endblock %}</title>

    <!-- CSS & Fonts -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">


    <!-- Optional Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<body>
    <div id="app">
        {% block content %}{% endblock %}
    </div>

    {% block scripts %}
    {% block scripts %}
<script>
  console.warn('🔥 Sync script loaded');

  function syncStatsRowHeights() {
    const mainRows = document.querySelectorAll('.table-main tbody tr');
    const statRows = document.querySelectorAll('.table-stats tbody tr');
    if (mainRows.length !== statRows.length) {
      console.error('⚠️ Row count mismatch:', mainRows.length, statRows.length);
      return;
    }
    mainRows.forEach((r,i) => {
      const h = r.offsetHeight;
      console.log(`Row ${i} → ${h}px`);
      statRows[i].style.height = `${h}px`;
    });
  }

  (function(){
    const btn   = document.getElementById('toggleEditBtn');
    const save  = document.getElementById('saveBtn');
    const edits = document.querySelectorAll('.edit-only');
    const views = document.querySelectorAll('.view-only');

    window.toggleEditMode = function() {
      const entering = btn.innerText === 'Edit';
      btn.innerText    = entering ? 'Cancel' : 'Edit';
      save.style.display = entering ? '' : 'none';
      edits.forEach(e => e.style.display = entering ? '' : 'none');
      views.forEach(v => v.style.display = entering ? 'none' : '');

      if (entering) {
        requestAnimationFrame(()=>
          requestAnimationFrame(syncStatsRowHeights)
        );
      } else {
        document.querySelectorAll('.table-stats tbody tr')
                .forEach(r=>r.style.height = '');
      }
    };
    window.addEventListener('resize', ()=>{
      if (btn.innerText==='Cancel') syncStatsRowHeights();
    });
  })();
</script>
{% endblock %}

    
    
    
    {% endblock %}


</body>
</html>